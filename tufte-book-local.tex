\RequirePackage{eushield, xspace}

\setlength{\parskip}{0.5\baselineskip}%

%% Choose the monochrome crest for the front page (if crests used)
\shieldtype{0}

%% Default values for various fields
\newcommand{\thesistext}{4th Year Project Report}
\newcommand{\degreetext}{Computer Science}
%\newcommand{\degreetext}{Artificial Intelligence and Computer Science}
\newcommand{\infschool}{School of Informatics}
\newcommand{\university}{University of Edinburgh}

%%
% Produces a full title page

\renewcommand{\maketitlepage}[0]{%
  \cleardoublepage%
      {%
        \begin{fullwidth}%
          \begin{centering}%
            \resizebox{30mm}{!}{\includeshield}%
            \vspace{2.5cm}%
            \fontsize{32pt}{35pt}%
            \selectfont\par\noindent{\sc\thanklesstitle}\par%
            \vspace{0.75cm}%
            \fontsize{12}{15}%
            \selectfont\par\noindent\allcaps{\thanklessauthor}%
            \vspace{0.75cm}%
            \fontsize{12}{15}%
            \selectfont\par\noindent\textit{\thesistext}%
            \vspace{-0.5em}%
            \fontsize{10}{15}%
            \selectfont\par\noindent\textit{\degreetext}%
            \vfill%
            \fontsize{12}{15}%
            \selectfont\par\noindent\allcaps{\infschool}%
            \fontsize{11}{11}%
            \selectfont\par\noindent\allcaps{\university}%
            \vspace{0.5cm}%
            \fontsize{24}{24}%
            \selectfont\par\noindent\the\year%
            \par%
            \end{centering}%
        \end{fullwidth}%
      }
      \thispagestyle{empty}%
      \clearpage%
}


%%
%% Let's have a dedication page so I can thank my mummy.
%%

\newcommand{\dedication}[1]
   {\clearpage\vspace*{\fill}
    {\itshape\LARGE #1}
    \vspace*{\fill}}


%%
%% Some commands which are generally useful...
%%

\newcommand{\NB}{N.B.\@\xspace}
\newcommand{\eg}{e.g.\@\xspace}
\newcommand{\Eg}{E.g.\@\xspace}
\newcommand{\ie}{i.e.\@\xspace}
\newcommand{\Ie}{I.e.\@\xspace}
\newcommand{\etc}{etc.\@\xspace}
\newcommand{\etal}{{\em et al}.\@\xspace}
\newcommand{\etseq}{{\em et seq}.\@\xspace}
\newcommand{\naive}{na\"\i ve\xspace}
\newcommand{\Naive}{Na\"\i ve\xspace}
\newcommand{\tm}{\raisebox{1ex}{\tiny TM}\xspace}
\newcommand{\cpright}{\raisebox{1ex}{\tiny\copyright}\xspace}
\newcommand{\degrees}{\raisebox{1.2ex}{\tiny\ensuremath{\circ}}\xspace}
\newcommand{\ch}{{\sc Ch.}}
\newcommand{\eqn}{{\sc Eq.}}
\newcommand{\fig}{{\sc Fig.}}
\newcommand{\tab}{{\sc Table}\@\xspace}


\newenvironment{publicationmeta}{%
  \cleardoublepage%
  \thispagestyle{plain}%
  \setlength{\parindent}{0pt}%
}{%
  \par\vspace*{\fill}\par%
  \smallcaps{\thesistext}\par%
  \smallcaps{\degreetext}\\%
  \smallcaps{\infschool}\\%
  \smallcaps{\thanklesspublisher}\par%
  \vspace{2\baselineskip}%
  \textit{Copyright \copyright\ \the\year\ \thanklessauthor}\par%
  \textit{%
    This \LaTeX\ document class is derived from the `Tufte-\LaTeX' document class and is licensed
    under the \href{https://www.apache.org/licenses/LICENSE-2.0}{Apache 2.0 license.}%
  }\par%
  \smallcaps{\href{https://github.com/AngusP/tufte-latex}{https://github.com/AngusP/tufte-latex}}%
}

%%
% Table of Contents Depth
\setcounter{tocdepth}{4}


%%
% Definition List

\newcommand{\deflisthead}[1]{\noindent\textit{#1}\par}
\newcommand{\deflistitem}[1]{\noindent\begin{quote}#1\end{quote}\par}

%%
% Appendix override
% From https://groups.google.com/d/msg/tufte-latex/oEWGA6624-Y/blvc_HKDoIwJ

\makeatletter% since we're using commands with @ in their name
\let\origappendix\appendix% save a copy of the original meaning of \appendix
\renewcommand{\appendix}{%
  \origappendix% do all the original \appendix stuff
  \titlecontents{chapter}%
    [0em] % distance from left margin
    {\vspace{1.5\baselineskip}\begin{fullwidth}\LARGE\rmfamily\itshape} % above (global formatting of entry)
    {\hspace*{0em}\appendixname~\thecontentslabel: } % before w/label (label = ``2'')
    {\hspace*{0em}} % before w/o label
    {\rmfamily\upshape\qquad\thecontentspage} % filler + page (leaders and page num)
    [\end{fullwidth}] % after
  \titleformat{\chapter}%
    [display]% shape
    {\relax\ifthenelse{\NOT\boolean{@tufte@symmetric}}{\begin{fullwidth}}{}}% format applied to label+text
    {\itshape\huge Appendix~\thechapter}% label
    {0pt}% horizontal separation between label and title body
    {\huge\rmfamily\itshape}% before the title body
    [\ifthenelse{\NOT\boolean{@tufte@symmetric}}{\end{fullwidth}}{}]% after the title body
  \setcounter{tocdepth}{1}
  \setcounter{secnumdepth}{1}
  %
  % Add any other special appendix-related code here.
  %
}
\makeatother% restore the special meaning of @
